<!DOCTYPE html>

<html>
<head>
	<title>Evolution Simulator</title>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="stylesheet.css">
	<script src="vatican.js"		type="text/javascript"></script>
	<script src="simulator.js"	type="text/javascript"></script>
	<script src="editor.js"			type="text/javascript"></script>
	<script src="startup.js"		type="text/javascript"></script>
</head>

<body onload="startUp();">

<form action="javascript:" id="controls">
	<div>
		<span id="tabTops" onclick="Vatican.switchTab(event);">
			<input id="tabTopRuntime"						type="radio" name="tabTops" value="runTime" checked>Runtime
			<input id="tabTopEditor"							type="radio" name="tabTops" value="editor">Creature Editor
			<input id="tabTopCommandPrompt"			type="radio" name="tabTops" value="commandPrompt">Command Prompt
		</span>
	&nbsp;&nbsp;&nbsp;<input type="checkbox" id="debug" onclick="Simulator.debug = this.checked;">Debug Mode
	&nbsp;&nbsp;&nbsp;<a href="javascript: alert('To Do:\n- rewrite creature editor\n- make all features work properly or remove them\n- create a strict naming convention for variables, functions, etc.\n- look through all code, and make sure that it is coded in a clear, consistent style\n- clean up interface on back end\n- clean up interface on front end\n- rewrite debugger to allow different levels of debugging\n- make sure that interface between core and UI allows easy porting to node.js');">Notes</a>
	</div>

	<div id="tabContainer">
		<div id="runTime" class="visible">
			<input type="button" id="starter" onclick="Simulator.startUp();" value="Start">
			<button type="button" id="reset" onclick="soup = [Simulator.Creature(ancestor.source, ancestor.color, ancestor.food) ]; Simulator.display.call(null)">
				Reset
			</button>
			&nbsp;&nbsp;
			<span>Stop After 
				<input type="text" id="runFor" onkeyup="Simulator.runFor()" onclick="if(this.value == 'infinite'){this.value = ''}" value="infinite"> 
				Generations
			</span>
			<br>
			<table id="options">
			<tr>
				<td>
					Mutation Rate: 1 / 
					<input id="mutationRate" type="text" value="10" onkeyup="Simulator.changeMutationRate()">
				</td>
				<td>
					&nbsp;
				</td>
				<td>
					<input type="checkbox" id="randomLimit">
					<abbr title="If checked, the population limit entered will be the maximum population limit">
						Random Population Limit
					</abbr>
				</td>
				<td class="left">
					Total Generations: 
					<span id="generations" class="noBorders right">
						&nbsp;
					</span>
				</td>
			</tr>
			<tr>
				<td>
					Population Limit:
					<input type="text" id="populationLimit" value="50" onkeyup="Simulator.changePopulationLimit()" style="text-align: left">
				</td>
				<td>
					Delay in <abbr title="milliseconds">MS</abbr>:
					<input type="text" id="simulationSpeed" value="0" onkeyup="Simulator.changeSpeed()">
				</td>
				<td class="left">
					<input type="checkbox" id="displayOn" checked onclick="Simulator.displayOn = this.checked; var element = document.getElementById('visibleSoup'); if(this.checked){Simulator.display.call(window); element.className = 'visible'} else {element.className = 'hidden'; element.innerHTML = ''}">
					Show Creatures
				</td>
				<td class="left">
					Current Population: 
					<span id="currentPopulation" class="noBorders right">
						&nbsp;
					</span>
				</td>
			</tr>
			</table>
		</div>

	<div id="editor" class="hidden">
	<textarea id="codeBox"></textarea>

	<span id="colorPreview" class="left">
		Color: 
		<input id="red" type="text" value="" maxLength="3" onkeyup="editor.colorPreview();">
		<input id="green" type="text" value="" maxlength="3" onkeyup="editor.colorPreview();">
		<input id="blue" type="text" value="" maxlength="3" onkeyup="editor.colorPreview();">
	</span>

	Food: 
	<input id="food" type="text" onkeyup="Vatican.validate(document.getElementById('food'), /\d*/g, /\D+/g)" value="">

	<span style="text-align: right;">
		<button id="saveChanges"	type="button" onclick="editor.saveChanges()">Save Changes</button>
		<button id="plus1"				type="button" onclick="editor.addCreature()">Add Copy to Soup</button>
		<button id="minus1"				type="button" onclick="editor.removeCreature()">Remove Creature</button>
		<button id="run1"					type="button" onclick="Simulator.run(editor.creatureNumber);">Run This Creature's Source Code</button>
	</span>

</div>

<div id="commandPrompt" class="hidden">
	<textarea id="commandBox"></textarea>
	<button id="runCommand" onclick="eval(document.getElementById('commandBox').value.toString() )">
		Run
	</button>
</div>

</div>
</form>

<textarea id="soupDump" class="hidden"></textarea>

<div id="visibleSoup" onclick="editor.update(event)">
	<div></div>
</div>

</body></html>
